<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8"/>
    <title>首页</title>
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <style>
        .footList > div {
            height: 100px;
            margin: 10px;
        }

        .footList > div > div {
            height: 100px;
            padding: 0;
            background: #2e6da4;
        }

        .footInfo {
            padding: 10px;
            overflow: hidden;
            text-overflow: ellipsis;

        }

        .footInfo > div {
            width: 60%;
            height: 30%;
        }

        .footInfo > div > div > div {
            border-radius: 20px;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .footInfo div > div > .input-group > span {
            cursor: pointer;
        }

        .footInfo > span:nth-child(3) {
            color: red;
            display: block;
        }

        .footInfo > span:nth-child(2) {
            font-weight: 300;
            font-family: sans-serif;

        }

        .footInfo > span:nth-child(1) {
            display: block;
            font-weight: 900;
            font-family: sans-serif;

        }
        #shoppingCart > li > div > span:nth-child(1) {
           float: left;
            width: 20%;
        }


        #shoppingCart > li > div > span:nth-child(2) {

            margin: auto;
            width: 15%;
            height: 80%;
            background: #0d0d0d;
        }

        #shoppingCart > li > div > span:nth-child(2) >input{
            width: 15%;
        }
        #shoppingCart > li > div > span:nth-child(3) {
            float: right;
            width: 20%;
        }


    </style>
</head>

<body>
<header>
    <style>body {
        padding-top: 50px;
        font-family: 'microsoft yahei', Arial, sans-serif;
        margin: 0;
    }</style>
    <nav class="navbar navbar-default navbar-inverse navbar-fixed-top " role="navigation">
        <div class="container">
            <div class="row">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">网络订餐系统</a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li><a href="/">首页</a></li>
                        <li><a href="#">关于我们</a></li>
                    </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <!--<li><a href="#">链接</a></li>-->
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                欢迎您，
                                dwq<b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="#">设置</a></li>
                                <li><a href="#">个人资料</a></li>
                                <li><a href="#">账户中心</a></li>
                                <li>
                                    <a href="#">管理员</a>
                                </li>
                                <li class="divider"></li>
                                <li><a href="/logout">退出登录</a></li>
                            </ul>
                        </li>


                    </ul>
                </div>
            </div>
        </div>
    </nav>


</header>

<main class="container-fluid ">
    <div class="row">
        <div class="col-md-offset-2 col-md-7">
            <div class="container-fluid footList">
                <div class="col-md-5 col-xs-5  col-sm-5 container-fluid">
                    <div class="col-md-3 col-xs-3  col-sm-3"><img
                            src="https://fuss10.elemecdn.com/6/5c/22d97554e08e160e47d2d7dafd027jpeg.jpeg?imageMogr2/thumbnail/100x100/format/webp/quality/85"
                            style="width: 100%;height: 100%"></div>
                    <div  foodid="1" class="footInfo  col-md-9 col-xs-9  col-sm-9 container " style="padding: 10px;">
                        <span>酸辣土豆丝</span>
                        <span class="text-nowrap">咸鲜味大，基部钝形，边缘呈波状，平滑无毛，开黄白色花的一或二年生的草本植物。极受消费者的欢迎。</span>
                        <span style=""><i class="glyphicon glyphicon-usd"></i>6元</span>
                        <div class="pull-right">

                            <div>
                                <div class="btn btn-sm btn-info" onclick="addToCart(this,'酸辣土豆丝',1,6)">
                                    <!--this,name,id,price-->
                                    加入购物车
                                </div>
                            </div>
                            <div style="display:none">
                                <div class="input-group input-group-sm">
                                    <span class="input-group-addon" onclick="onclickadd(1,this)"><i class=" glyphicon glyphicon-plus"></i></span>
                                    <input type="tel" class="form-control">
                                    <span class="input-group-addon 	" onclick="onclicksub(1,this)"><i
                                            class="glyphicon glyphicon-minus"></i></span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="col-md-5 col-xs-5  col-sm-5 container-fluid">
                    <div class="col-md-3 col-xs-3  col-sm-3"><img
                            src="https://fuss10.elemecdn.com/6/5c/22d97554e08e160e47d2d7dafd027jpeg.jpeg?imageMogr2/thumbnail/100x100/format/webp/quality/85"
                            style="width: 100%;height: 100%"></div>
                    <div  class="footInfo  col-md-9 col-xs-9  col-sm-9 container " style="padding: 10px;">
                        <span>酸辣土豆丝</span>
                        <span class="text-nowrap">咸鲜味大，基部钝形，边缘呈波状，平滑无毛，开黄白色花的一或二年生的草本植物。极受消费者的欢迎。</span>
                        <span style=""><i class="glyphicon glyphicon-usd"></i>6元</span>
                        <div class="pull-right">

                            <div>
                                <div class="btn btn-sm btn-info" onclick="addToCart(this,'裤带面',1,6)">
                                    <!--this,name,id,price-->
                                    加入购物车
                                </div>
                            </div>
                            <div style="display:none">
                                <div class="input-group input-group-sm">
                                    <span class="input-group-addon" onclick="onclicksub(1,this)"><i class=" glyphicon glyphicon-plus"></i></span>
                                    <input  class="form-control" value="1">
                                    <span class="input-group-addon 	" onclick="onclickadd(1,this)"><i
                                            class="glyphicon glyphicon-minus"></i></span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>


            </div>
        </div>

        <div class="col-md-3 col-xs-2 col-sm-2">
            <nav class="text-center " role="navigation">
                <div class="container-fluid">
                    <a href="#shoppingCart" class="nav-header collapsed" data-toggle="collapse">
                        <button type="button" class="btn btn-info btn-lg"
                                style="text-shadow: black 5px 3px 3px;font-size: 30px;"><span
                                class="glyphicon glyphicon-shopping-cart">购物车</span></button>
                    </a>

                    <ul id="shoppingCart" class="nav nav-list collapse secondmenu list-group"
                        style="height: 0px;background: #eee">

                        <li class="list-group-item" foodid="1">
                            <div >
                                <span >肉夹馍</span>
                                <span >
                                   <button onclick="onclicksub(1,this)">-</button><input value="1"><button onclick="onclickadd(1,this)">+</button>
                                </span>
                                <span >¥252</span>
                            </div>
                        </li>
                        <li class="list-group-item" foodid="2">
                            <div>
                                <span >米线</span>
                                <span >
                                   <button>-</button><input value="1"><button>+</button>
                                </span>
                                <span >¥2</span>
                            </div>
                        </li>
                        <li class="list-group-item" foodid="3">
                            <div >
                                <span >麻辣香锅</span>
                                <span >
                                   <button>-</button><input value="2"><button>+</button>
                                </span>
                                <span >¥21</span>
                            </div>
                        </li>
                    </ul>
                    <!--结算栏目-->
                    <div class="container-fluid" style="background-color: #2c2c2c;box-shadow: 0 1px 3px #2c2c2c;">
                        <div class="col-md-7" style="color: white;    font-size: 18px;">
                            <span class="list-inline" style="color: red">总金额:9999元</span>
                        </div>
                        <div class="col-md-5">
                            <button class="btn btn-primary btn-block" id="submitOrder">结算</button>
                        </div>

                    </div>
                </div>

            </nav>
        </div>

    </div>

    <div class=" row text-center">
        <ul class="pagination ">
            <li><a href="#">&laquo;</a></li>
            <li><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">5</a></li>
            <li><a href="#">&raquo;</a></li>
        </ul>
    </div>
</main>

<footer>
    <div class="row row-pb-md" style="margin: 0;">
        <div class=" col-md-12 text-center copyright py-2 lead"
             style="background: white;margin-top: 40px;margin-bottom: 0;">
            <hr/>
            <span> Copyright © 2018 - 董文强个人毕设网站 网上订餐系统</span>
            <span></span>
        </div>
    </div>
</footer>

<!--    -->
</body>
<script>
    /**点击添加购物车,左侧购物车出现*/
    function addToCart(btn, name, id, price) {
        $(btn).parent().hide();
        console.log($(btn).parent().next());
        $(btn).parent().next().show();
        $(btn).parent().next().find("input").val(1);
        var li = "<li class='list-group-item' foodid='"+
            id+"'><div ><span >"+
            name+"</span><span><button " +
            "onclick='onclicksub("+id+",this)'>-</button><input value='1'><button " +
            "onclick='onclicksub("+id+",this)'>+</button></span><span>"+
            price+"</span></div></li>";
        $("#shoppingCart").append(li);
    }
</script>

<script>
    /**
     * 点击购物车提交
     * */
    $("#submitOrder").click(function () {
        var order=new Array();
        /*var count = $("#shoppingCart >li input").val()
        console.log( count );*/
        $("#shoppingCart >li").each(function (i) {
            var food ={};
            $(this).attr('foodid');
            food.count = $(this).find("input").val();
            food.id=$(this).attr("foodif");
            order[i] = food;
        })
        console.log(order)
    });
</script>
<script>
    /**
     * 点击添加和删除
     * */
    function onclickadd(id,btn){
        console.log($(btn));
        console.log('点击++');
        var count = $(btn).siblings("input").val();
        $("[foodid='"+id+"'] input").val(parseInt(count)+1);
    }
    function onclicksub(id,btn){
        console.log('点击--');
        var count = $(btn).siblings("input").val();
        if(parseInt(count) == 1){
            $("#shoppingCart > [foodid='"+id+"']").remove();
            $("[foodid='"+id+"'] >div >div:eq(0)").show();
            $("[foodid='"+id+"'] >div >div:eq(1)").hide();
        }else
            $("[foodid='"+id+"']  input").val(parseInt(count)-1);
    }
</script>
</html>